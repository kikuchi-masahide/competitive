#include <iostream>
#include <vector>
#include <limits.h>
#include <algorithm>
#include <string>
#include <math.h>
#include <limits.h>
#include <queue>
#include <map>
#include <set>
#include <iomanip>
#include <bitset>
#include <cassert>
#include <random>
#include <functional>
#include <stack>
#include <iomanip>
#include <cassert>
//#include <boost/multiprecision/cpp_int.hpp>
#include <complex>
#include <cstdio>

using namespace std;
//std::ios::sync_with_stdio(false);
//std::cin.tie(0);
const long long MOD = 1e9 + 7;
typedef long long ll;
typedef long double ld;
typedef pair<ll, ll> pll;
typedef pair<ld, ll> pdl;
typedef pair<ld, ld> pdd;
typedef vector<ll> VLL;
typedef vector<VLL> VVLL;
//typedef boost::multiprecision::cpp_int bigint;

//—^‚¦‚ç‚ê‚½–Ø‚ð¶•”•ª–ØA‰E•”•ª–ØAª‚Ì‡‚Å—ˆ–K(reserve„§)
void postorderTreeWalk(ll N,ll root, VVLL& childs, VLL& order) {
	if (childs[root][0] != -1)postorderTreeWalk(N, childs[root][0], childs, order);
	if (childs[root][1] != -1)postorderTreeWalk(N, childs[root][1], childs,order);
	order.push_back(root);
	return;
}

void preorderTreeWalk(ll N, ll root, VVLL& childs, VLL& order) {
	order.push_back(root);
	if (childs[root][0] != -1)preorderTreeWalk(N, childs[root][0], childs, order);
	if (childs[root][1] != -1)preorderTreeWalk(N, childs[root][1], childs, order);
	return;
}

void inorderTreeWalk(ll N, ll root, VVLL& childs, VLL& order) {
	if (childs[root][0] != -1)inorderTreeWalk(N, childs[root][0], childs, order);
	order.push_back(root);
	if (childs[root][1] != -1)inorderTreeWalk(N, childs[root][1], childs, order);
}

int main() {
	std::ios::sync_with_stdio(false);
	std::cin.tie(0);
	ll N;
	cin >> N;
	VVLL childs(N);
	VLL parents(N,-1);
	for (ll n = 0; n < N; n++) {
		ll id, l, r;
		cin >> id >> l >> r;
		childs[id] = { l,r };
		if (l != -1)parents[l] = id;
		if (r != -1)parents[r] = id;
	}
	ll root = -1;
	for (ll n = 0; n < N; n++) {
		if (parents[n] == -1) {
			root = n;
			break;
		}
	}
	cout << "Preorder\n";
	VLL preo;
	preo.reserve(N);
	preorderTreeWalk(N, root, childs, preo);
	for (ll n = 0; n < N; n++)cout << " " << preo[n];
	cout << "\nInorder\n";
	VLL ino;
	ino.reserve(N);
	inorderTreeWalk(N, root, childs, ino);
	for (ll n = 0; n < N; n++)cout << " " << ino[n];
	cout << "\nPostorder\n";
	VLL posto;
	posto.reserve(N);
	postorderTreeWalk(N, root, childs, posto);
	for (ll n = 0; n < N; n++)cout << " " << posto[n];
	cout << "\n";
	return 0;
}